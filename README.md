# concepts_of_programming_languages
Studying repository

Инструкция:

В данный момент в репозитории отдельно существуют 2 проекта: byte_encoder и VM

byte_encoder - кодировшик под Ассемблер. Согласование с VM стало лучше, но многие команды до сих пор не реализованы и нуждаются в уточнениях.

VM - виртуальная машина. Сейчас она умеет мало, но это должно быть хорошим началом.
Правила: 
- VM принимает на вход строку с относительным или полным адресом файла с программой в bytecode.
- Любая программа начинается с команды 0C 00 00 00 - она обозначает сдвиг IP. Далее идёт указание, что следующий аргумент - адрес: 02 00 00 00, а потом уже сам этот адрес, записанный в таком же виде (4 двузначных шестандцатеричных числа = 4 байта).
- Адреса вычисляются от начала программы, начиная с 0, и находятся внутри файла с программой. Двузначное шестнадцатеричное число т. е. один байт занимает одну ячейку памяти.
- Любая команда - это последовательность из 20 байт: 4 для номера команды, 4 для типа первого аргумента, 4 для первого аргумента, 4 для типа второго аргумента и 4 для второго аргумента. Если кого-то аргумента нет, соответствующие байты заполняются нулями.

Аргументы команд:
- Любой аргумент задаётся двумя числами: сначала тип аргумента, а потом сам аргумент.
- Типы: 1 - для регистров, далее следует номер регистра
-       2 - для адресов в памяти, далее следует адрес
-       3 - для чисел, далее следует само число. Числа целые, из диапозона стандартного int (4 байта со знаком)
-       4 - для строк.

Реализована команда 0D 00 00 00 - вывод строки в консоль. Она принимает на вход адрес, т. е. сначала обозначение 02 00 00 00, а потом адрес ячейки в памяти, где начинается строка. Строка должна заканчиваться символом 00. Пока получается работать только с латинскими строками.
- В файле byte_input.bin лежит программа для вывода в консоль строки "Hello world!".
- В файле harder_input.bin лежит программа посложнее, показывающая, что данные и команды могут быть перемешаны. 

Реализована команда 01 00 00 00 - "передвинуть" (переместить) число. 
- У этой команды всегда 2 аргумента.
- Первый аргумен команды: источник. Это может быть число, адрес, или регистр.
- Второй аргумен: место назначения. Это адрес или регистр.
- Разрешены любые операции в пределах указанных аргументов. Передвинуть из адреса в адрес тоже можно, но будет показано предупреждение о том, что это долгая операция.

Релизована команда 0B 00 00 00 - вывести число в консоль.
- У этой команды один аргумент.
- Аргумент может быть регистром, адресом или числом.
- В байт-коде подаётся шестандцатеричное число. На консоль выводится десятичное.

- В файле move_check.bin лежит простой пример на перемещение и вывод - если всё правильно, программа должна вывести в консоль число 7.
- В файле move_out_check.bin лежит более сложный пример, который показывает практически все возможности последних двух команд.
Вывод в консоль:
  37448
  112
  112
  WARNING: it takes too much time to move from memory to memory, but I will do it.
  37448
  5

Детали для сборки: проекты собираются с помощью cmake файлов CMakeLists.txt, рекомендуется проводить сбрку в отдельных директориях.
